(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),a=n.n(c),u=n(15),o=n.n(u),i=n(5),s=n(4),l=n(3),d=n.n(l),f="/api/persons",b={getAll:function(){return d.a.get(f).then((function(e){return e.data}))},create:function(e){return d.a.post(f,e).then((function(e){return e.data}))},update:function(e,t){return d.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},deleteP:function(e){return d.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.status}))}},j=function(e){var t=e.person,n=e.handleClick;return Object(r.jsxs)("div",{children:[t.name," ",t.number,Object(r.jsx)("button",{onClick:n,children:"delete"})]})},m=function(e){var t=e.filter,n=e.handleChange;return Object(r.jsxs)("form",{children:["filter shown with ",Object(r.jsx)("input",{value:t,onChange:n})]})},h=function(e){var t=e.newPerson,n=e.onSubmit,c=e.handleChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t.name,onChange:c("name")}),Object(r.jsx)("br",{}),"number: ",Object(r.jsx)("input",{value:t.number,onChange:c("number")})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.persons,n=e.handleClick;return Object(r.jsx)("div",{children:t.map((function(e){return Object(r.jsx)(j,{person:e,handleClick:n(e)},e.name)}))})},O=function(e){var t=e.message;return 0===t.type.length?null:Object(r.jsx)("div",{className:t.type,children:t.text})},x=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],u=Object(c.useState)({name:"",number:""}),o=Object(s.a)(u,2),l=o[0],d=o[1],f=Object(c.useState)(""),j=Object(s.a)(f,2),x=j[0],v=j[1],g=Object(c.useState)({type:"",text:""}),y=Object(s.a)(g,2),w=y[0],C=y[1];Object(c.useEffect)((function(){b.getAll().then((function(e){a(e)})).catch((function(e){console.log("couldnt download persons from server",e)}))}),[]);var k=function(e){return"name"===e?function(e){var t=Object(i.a)({},l);t.name=e.target.value,d(t)}:"number"===e?function(e){var t=Object(i.a)({},l);t.number=e.target.value,d(t)}:"filter"===e?function(e){v(e.target.value),console.log(x)}:void 0},S=n.filter((function(e){return e.name.toUpperCase().includes(x.toUpperCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(O,{message:w}),Object(r.jsx)(m,{filter:x,handleChange:k("filter")}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(h,{newPerson:l,onSubmit:function(e){if(e.preventDefault(),n.map((function(e){return e.name})).includes(l.name))if(window.confirm("".concat(l.name," is already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===l.name})),r=Object(i.a)(Object(i.a)({},t),{},{number:l.number});b.update(r.id,r).then((function(e){a(n.map((function(t){return t.id===e.id?e:t}))),d({name:"",number:""})})).catch((function(e){console.log(e.response.data),C({type:"error",text:e.response.data}),setTimeout((function(){return C({type:"",text:""})}),5e3)}))}else d({name:"",number:""});else b.create(l).then((function(e){C({type:"success",text:"Added ".concat(l.name)}),setTimeout((function(){return C({type:"",text:""})}),5e3),a(n.concat(e)),d({name:"",number:""})})).catch((function(e){C({type:"error",text:e.response.data.error}),setTimeout((function(){return C({type:"",text:""})}),5e3)}))},handleChange:k}),Object(r.jsx)("h2",{children:" Numbers"}),Object(r.jsx)(p,{persons:S,handleClick:function(e){return function(){window.confirm("Delete ".concat(e.name," ?"))&&b.deleteP(e.id).then((function(t){C({type:"success",text:"Deleted ".concat(e.name)}),setTimeout((function(){return C({type:"",text:""})}),5e3),a(n.filter((function(t){return t.id!==e.id})))})).catch((function(t){C({type:"error",text:"".concat(e.name," has already been removed from server")}),setTimeout((function(){return C({type:"",text:""})}),5e3),a(n.filter((function(t){return t.id!==e.id})))}))}}})]})};n(39);o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.799e9aec.chunk.js.map