{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","create","newObject","post","update","id","put","deleteP","delete","status","Person","person","handleClick","name","number","onClick","Filter","filter","handleChange","value","onChange","PersonForm","newPerson","onSubmit","type","Persons","persons","map","Message","message","length","className","text","App","useState","setPersons","setNewPerson","setFilter","setMessage","useEffect","defaultPersons","catch","error","console","log","event","new_person","target","showPersons","toUpperCase","includes","preventDefault","window","confirm","node","find","p","changedPerson","returnedPerson","setTimeout","concat","res","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.799e9aec.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deleteP = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.status )\n}\n\nconst personService = { getAll, create, update, deleteP }\nexport default personService","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nconst Person = ({ person, handleClick }) => {\n  return (\n    <div>\n      {person.name} {person.number}\n      <button onClick={handleClick}>delete</button>\n    </div>\n  )\n}\n\nconst Filter = ({ filter, handleChange }) => {\n  return (\n    <form>\n      filter shown with <input value={filter} onChange={handleChange} />\n    </form>\n  )\n}\n\nconst PersonForm = ({ newPerson, onSubmit, handleChange }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input value={newPerson.name} onChange={handleChange('name')} /><br />\n          number: <input value={newPerson.number} onChange={handleChange('number')} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = ({ persons, handleClick }) => {\n  return (\n    <div>\n      {persons.map(person => <Person key={person.name} person={person} handleClick={handleClick(person)} />)}\n    </div>\n  )\n}\n\nconst Message = ({ message }) => {\n  if (message.type.length === 0) {\n    return null\n  }\n\n  return (\n    <div className={message.type}>\n      {message.text}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newPerson, setNewPerson] = useState({ name: '', number: '' })\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState({ type: '', text: '' })\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(defaultPersons => {\n        setPersons(defaultPersons)\n      })\n      .catch(error => {\n        console.log('couldnt download persons from server', error)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    let person_names = persons.map(person => person.name)\n    if (person_names.includes(newPerson.name)) {\n      if (window.confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`)) {\n        let node = persons.find(p => p.name === newPerson.name)\n        let changedPerson = { ...node, number: newPerson.number }\n        personService\n          .update(changedPerson.id, changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id === returnedPerson.id ? returnedPerson : person))\n            setNewPerson({ name: '', number: '' })\n          })\n          .catch(error => {\n            console.log(error.response.data)\n            setMessage({ type: 'error', text: error.response.data })\n            setTimeout(() => setMessage({ type: '', text: '' }), 5000)\n          })\n      } else {\n        setNewPerson({ name: '', number: '' })\n      }\n    } else {\n      personService\n        .create(newPerson)\n        .then(returnedPerson => {\n          setMessage({ type: 'success', text: `Added ${newPerson.name}` })\n          setTimeout(() => setMessage({ type: '', text: '' }), 5000)\n          setPersons(persons.concat(returnedPerson))\n          setNewPerson({ name: '', number: '' })\n        })\n        .catch(error => {\n          setMessage({ type: 'error', text: error.response.data.error })\n          setTimeout(() => setMessage({ type: '', text: '' }), 5000)\n        })\n    }\n  }\n\n  const handleChange = (type) => {\n    if (type === 'name')\n      return (event) => {\n        const new_person = { ...newPerson }\n        new_person.name = event.target.value\n        setNewPerson(new_person)\n      }\n    if (type === 'number')\n      return (event) => {\n        const new_person = { ...newPerson }\n        new_person.number = event.target.value\n        setNewPerson(new_person)\n      }\n    if (type === 'filter')\n      return (event) => {\n        setFilter(event.target.value)\n        console.log(filter)\n      }\n  }\n\n  const handleDelete = (person) => {\n    return () => {\n      if (window.confirm(`Delete ${person.name} ?`)) {\n        personService\n          .deleteP(person.id)\n          .then(res => {\n            setMessage({ type: 'success', text: `Deleted ${person.name}` })\n            setTimeout(() => setMessage({ type: '', text: '' }), 5000)\n            setPersons(persons.filter(p => p.id !== person.id))\n          })\n          .catch(error => {\n            setMessage({ type: 'error', text: `${person.name} has already been removed from server` })\n            setTimeout(() => setMessage({ type: '', text: '' }), 5000)\n            setPersons(persons.filter(p => p.id !== person.id))\n          })\n      }\n    }\n  }\n\n  const showPersons = persons.filter(person => person.name.toUpperCase().includes(filter.toUpperCase()))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} />\n      <Filter filter={filter} handleChange={handleChange('filter')} />\n      <h2>add a new</h2>\n      <PersonForm newPerson={newPerson} onSubmit={addPerson} handleChange={handleChange} />\n      <h2> Numbers</h2>\n      <Persons persons={showPersons} handleClick={handleDelete} />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}